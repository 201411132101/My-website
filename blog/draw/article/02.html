<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="toTop" content="true">

<title>Kohn雪花</title>

<link rel="shortcut icon" href="https://201411132101.github.io/bufan/favicon.ico">

<!--css-->
<link href="https://201411132101.github.io/bufan/css/style.css" rel="stylesheet" type="text/css" />
<style type="text/css">
body { 
	background-image:url(https://201411132101.github.io/bufan/images/bg-blog.jpg);
	background-color:black;
}
</style>

<!--js-->
<script type="text/javascript" src="https://201411132101.github.io/bufan/js/title.js"></script>
<script type="text/javascript" src="https://201411132101.github.io/bufan/js/jquery.min.js"></script>
<script type="text/javascript" src="https://201411132101.github.io/bufan/js/snow-plugin.js"></script> 
<script type="text/javascript" src="https://201411132101.github.io/bufan/js/right-click.js"></script>
<script type="text/javascript" src="https://201411132101.github.io/bufan/js/toTop.js"></script>
</head>

<body onmousedown="mouseDown()">

<div id="container">
	<div id="header">
		<ul id="nav">
			<li class="current"><a href="https://201411132101.github.io/bufan">首页</a></li>
			<li><a href="javascript:void(0)">博客</a>
				<ul>
					<li><a href="https://201411132101.github.io/bufan/blog/draw">画图</a></li>
					<li><a href="https://201411132101.github.io/bufan/blog/picture">图像处理</a></li>
					<li><a href="https://201411132101.github.io/bufan/blog/data">数据处理</a></li>
					<li><a href="https://201411132101.github.io/bufan/blog/matlab">matlab函数源代码分析</a></li>
					<li><a href="https://201411132101.github.io/bufan/blog/funny">黑科技</a></li>
				</ul>
			</li>
			<li><a href="javascript:void(0)">折纸</a>
				<ul>
					<li><a href="https://201411132101.github.io/bufan/origami/knowledge">基础知识</a></li>
					<li><a href="https://201411132101.github.io/bufan/origami/example">折纸实例</a></li>
				</ul>
			</li>
			<li><a href="javascript:void(0)">动漫</a>
				<ul>
					<li><a href="https://201411132101.github.io/bufan/animation/recommend">动漫推荐</a></li>
					<li><a href="https://201411132101.github.io/bufan/animation/exhibition">漫展收获</a></li>
				</ul>
			</li>
			<li><a href="https://201411132101.github.io/bufan/Japanese">钉宫教你学五十音</a></li>
			<li><a href="https://201411132101.github.io/bufan/website">网站推荐</a></li>
			<!--获奖证书https://201411132101.github.io/bufan/certificate -->
		</ul>
	</div>
	
	<div id="page">
		<div id="left">
			<div id="subtitle1"><p>Kohn雪花</p></div>	
			<p>代码有些冗杂，坐标的转换让我很是不爽，需要学习一下高级的写法。</p>
			<canvas id="test" width="600" height="600"></canvas>
		</div>
	</div>
	
	<div id="footer">
		本网站是各种demo修改拼接而成，如有雷同，实属正常
	</div>
</div>

<!--画图 -->
<script type="text/javascript">
var canvas = document.getElementById("test");
var context = canvas.getContext('2d');
var width = 600;
var height = 600;

// 坐标轴范围
var xmin = -2;
var xmax = 2;
var ymin = -1.5;
var ymax = 2.5;

function draw_Kohn_Curve(P1x, P1y, P2x, P2y, N){
	// P1，P2是线段的始末两点(必须是1*2的向量)，N是递归层数   
	theta = Math.PI / 3;
	  
	if (N == 1){
		context.beginPath();
		context.lineTo(P1x, height-P1y);
		context.lineTo(P2x, height-P2y);
		context.stroke();
		context.closePath();
	}
	else{
		var midx = (P2x - P1x) / 3;  
		var midy = (P2y - P1y) / 3;
		var Lx = P1x + midx;  
		var Ly = P1y + midy;
		var Rx = P2x - midx;  
		var Ry = P2y - midy; 
		var Newx = Lx + midx * Math.cos(theta) - midy * Math.sin(theta);  
		var Newy = Ly + midx * Math.sin(theta) + midy * Math.cos(theta); 
		draw_Kohn_Curve(P1x, P1y, Lx, Ly, N-1);  
		draw_Kohn_Curve(Lx, Ly, Newx, Newy, N-1);  
		draw_Kohn_Curve(Newx, Newy, Rx, Ry, N-1);  
		draw_Kohn_Curve(Rx, Ry, P2x, P2y, N-1);  
	}
}

// draw
var N = 1;
var d = -1;
function draw_snow(){
	context.clearRect(0,0,width,height);
	
	draw_Kohn_Curve((1-xmin)/(xmax-xmin)*width, (0-ymin)/(ymax-ymin)*height,
	(-1-xmin)/(xmax-xmin)*width, (0-ymin)/(ymax-ymin)*height, N);
	
	draw_Kohn_Curve((-1-xmin)/(xmax-xmin)*width, (0-ymin)/(ymax-ymin)*height,
	(0-xmin)/(xmax-xmin)*width, (Math.sqrt(3)-ymin)/(ymax-ymin)*height, N);  
	
	draw_Kohn_Curve((0-xmin)/(xmax-xmin)*width, (Math.sqrt(3)-ymin)/(ymax-ymin)*height,
	(1-xmin)/(xmax-xmin)*width, (0-ymin)/(ymax-ymin)*height, N); 
	
	if (N == 1 || N == 6) d = -d;
	N += d;
}

setInterval("draw_snow()",500);
</script>

<!--music -->
<audio id="music" src="https://201411132101.github.io/bufan/audios/noisy.mp3">
	Your browser does not support HTML5 audio.
</audio>

<!--snow -->
<canvas class="snow-canvas" speed="1" interaction="false" size="2" count="80" opacity="0.00001" start-color="rgba(253,252,251,1)" 
end-color="rgba(251,252,253,0.3)" wind-power="0" image="false" width="1366" height="667"></canvas>
 
<canvas class="snow-canvas" speed="2" interaction="true" size="6" count="30" start-color="rgba(253,252,251,1)" 
end-color="rgba(251,252,253,0.3)" opacity="0.00001" wind-power="2" image="false" width="1366" height="667"></canvas>
 
<canvas class="snow-canvas" speed="3" interaction="true" size="12" count="20" wind-power="-5"
image="https://201411132101.github.io/bufan/images/snow.png" width="1366" height="667"></canvas> 
<script type="text/javascript">
$(".snow-canvas").snow();
</script>
</body>

</html>
